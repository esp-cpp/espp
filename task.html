<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Task APIs - ESP32 -  &mdash; ESPP main documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=a60756f2" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="_static/theme_overrides.css?v=851bd809" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=d01aebe5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=ff8fa330"></script>
    <script src="_static/js/theme.js"></script>

    
        

    <script type="text/javascript">
        DOCUMENTATION_OPTIONS.PAGENAME = 'task';
        DOCUMENTATION_OPTIONS.PROJECT_SLUG = 'esp-cpp';
        DOCUMENTATION_OPTIONS.LATEST_BRANCH_NAME = 'master';
        DOCUMENTATION_OPTIONS.VERSIONS_URL = 'https://dl.espressif.com/dl/esp-idf/idf_versions.js';
        DOCUMENTATION_OPTIONS.LANGUAGES = ["en"];
        DOCUMENTATION_OPTIONS.IDF_TARGET = 'esp32';
        DOCUMENTATION_OPTIONS.HAS_IDF_TARGETS = ["esp32", "esp32s2", "esp32c3"]
        DOCUMENTATION_OPTIONS.RELEASE = 'main';
        DOCUMENTATION_OPTIONS.LANGUAGE_URL = 'en';

    </script>

    <script type="text/javascript" src="https://dl.espressif.com/dl/esp-idf/idf_versions.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Task Example" href="task_example.html" />
    <link rel="prev" title="Tabulate Example" href="tabulate_example.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            ESPP
              <img src="_static/espressif-logo.svg" class="logo" alt="Logo"/>
          </a>

          
            <div class="selectors">
              <select id="target-select" style="width: 150px;" hidden>
                <option value="" disabled selected>Choose target...</option>
              </select>
            </div>
          

          <div class="selectors">
            <select id="version-select" style="width: 150px;" hidden>
              <option value="" disabled selected>Choose version...</option>
            </select>
          </div>

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="adc/index.html">ADC APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="base_component.html">Base Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="base_peripheral.html">Base Peripheral</a></li>
<li class="toctree-l1"><a class="reference internal" href="battery/index.html">Battery APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="bldc/index.html">BLDC APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ble/index.html">BLE APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="button.html">Button APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="byte90.html">ALXV Labs Byte90</a></li>
<li class="toctree-l1"><a class="reference internal" href="controller.html">Controller APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command Line Interface (CLI) APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="cobs.html">COBS (Consistent Overhead Byte Stuffing)</a></li>
<li class="toctree-l1"><a class="reference internal" href="color.html">Color APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="csv.html">CSV APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="display/index.html">Display APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="distance_sensors/index.html">Distance Sensor APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="encoder/index.html">Encoder APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="esp32_timer_cam.html">ESP32 TimerCam</a></li>
<li class="toctree-l1"><a class="reference internal" href="esp_box.html">ESP BOX</a></li>
<li class="toctree-l1"><a class="reference internal" href="event_manager.html">Event Manager APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="file_system.html">File System APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="filters/index.html">Filter APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="ftp/index.html">FTP APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="haptics/index.html">Haptics APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="hid/index.html">HID APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="i2c.html">I2C</a></li>
<li class="toctree-l1"><a class="reference internal" href="imu/index.html">IMU APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="interrupt.html">Interrupt APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="input/index.html">Input APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="io_expander/index.html">IO Expander APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="iperf_menu.html">Iperf Menu</a></li>
<li class="toctree-l1"><a class="reference internal" href="joystick.html">Joystick APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="led.html">LED APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="led_driver/index.html">LED Driver Components</a></li>
<li class="toctree-l1"><a class="reference internal" href="led_strip.html">LED Strip APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="logger.html">Logging APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="m5stack_tab5.html">M5Stack Tab5</a></li>
<li class="toctree-l1"><a class="reference internal" href="math/index.html">Math APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="matouch_rotary_display.html">MaTouch Rotary Display</a></li>
<li class="toctree-l1"><a class="reference internal" href="monitor.html">Monitoring APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="motorgo_mini.html">MotorGo Mini</a></li>
<li class="toctree-l1"><a class="reference internal" href="neopixel.html">Neopixel APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="network/index.html">Network APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="nfc/index.html">NFC APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="nvs.html">NVS APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="odrive_ascii.html">ODrive ASCII Protocol Component</a></li>
<li class="toctree-l1"><a class="reference internal" href="pid.html">PID APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="power/index.html">Power Monitoring APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="qtpy.html">QtPy ESP32 Pico and QtPy ESP32-S3</a></li>
<li class="toctree-l1"><a class="reference internal" href="qwiicnes.html">QwiicNES</a></li>
<li class="toctree-l1"><a class="reference internal" href="rmt.html">Remote Control Transceiver (RMT)</a></li>
<li class="toctree-l1"><a class="reference internal" href="rtc/index.html">RTC APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="rtsp.html">RTSP APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="runqueue.html">RunQueue APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="seeed_studio_round_display.html">Seeed Studio Round Display</a></li>
<li class="toctree-l1"><a class="reference internal" href="serialization.html">Serialization APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="state_machine.html">State Machine APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="t_deck.html">LilyGo T-Deck</a></li>
<li class="toctree-l1"><a class="reference internal" href="t_dongle_s3.html">LilyGo T-Dongle S3</a></li>
<li class="toctree-l1"><a class="reference internal" href="tabulate.html">Tabulate APIs</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Task APIs</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#task">Task</a><ul>
<li class="toctree-l3"><a class="reference internal" href="task_example.html">Task Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#api-reference">API Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#header-file">Header File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#classes">Classes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id1">Header File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="thermistor.html">Thermistor APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="timer.html">Timer APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="wifi/index.html">WiFi APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="wrover_kit.html">ESP32-WROVER-KIT</a></li>
<li class="toctree-l1"><a class="reference internal" href="ws_s3_geek.html">Waveshare ESP32-S3 GEEK</a></li>
<li class="toctree-l1"><a class="reference internal" href="ws_s3_lcd_1_47.html">Waveshare ESP32-S3 LCD 1.47”</a></li>
<li class="toctree-l1"><a class="reference internal" href="ws_s3_touch.html">Waveshare ESP32-S3 TouchLCD</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">ESPP</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Task APIs</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/esp-cpp/espp/blob/46e6bf33/docs/en/task.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="task-apis">
<h1>Task APIs<a class="headerlink" href="#task-apis" title="Permalink to this heading"></a></h1>
<section id="task">
<h2>Task<a class="headerlink" href="#task" title="Permalink to this heading"></a></h2>
<p>The <cite>Task</cite> component provides a cross-platform API around <cite>std::thread</cite> with
some additional configuration of stack size, priority, and core affinity for
FreeRTOS / ESP, as well as providing a callback API which enables interruptible
sleeps and termination of the task.</p>
<p>It also supports firing off syncrhonous (blocking) and asynchronous
(non-blocking) functions in separate threads, with the option of configuring the
core id and other esp-specific paramters.</p>
<p>Code examples for the task API are provided in the <cite>task</cite> example folder.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="task_example.html">Task Example</a><ul>
<li class="toctree-l2"><a class="reference internal" href="task_example.html#how-to-use-example">How to use example</a><ul>
<li class="toctree-l3"><a class="reference internal" href="task_example.html#build-and-flash">Build and Flash</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="task_example.html#example-output">Example Output</a></li>
</ul>
</li>
</ul>
</div>
</section>
<section id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this heading"></a></h2>
<section id="header-file">
<h3>Header File<a class="headerlink" href="#header-file" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/esp-cpp/espp/blob/46e6bf33/components/task/include/task.hpp">components/task/include/task.hpp</a></p></li>
</ul>
</section>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Permalink to this heading"></a></h3>
<dl class="cpp class">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4TaskE">
<span id="_CPPv3N4espp4TaskE"></span><span id="_CPPv2N4espp4TaskE"></span><span id="espp::Task"></span><span class="target" id="classespp_1_1Task"></span><span class="k"><span class="pre">class</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Task</span></span></span><span class="w"> </span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="k"><span class="pre">public</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="base_component.html#_CPPv4N4espp13BaseComponentE" title="espp::BaseComponent"><span class="n"><span class="pre">BaseComponent</span></span></a><a class="headerlink" href="#_CPPv4N4espp4TaskE" title="Permalink to this definition"></a><br /></dt>
<dd><p><a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> provides an abstraction over std::thread which optionally includes memory / priority configuration on ESP systems. It allows users to easily stop the task, and will automatically stop itself if destroyed. </p>
<p>There is also a utility function which can be used to get the info for the task of the current context, or for a provided <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> object.</p>
<p>There is also a helper function to run a lambda on a specific core, which can be used to run a specific function on a specific core, as you might want to do when registering an interrupt driver on a specific core.</p>
<section id="classespp_1_1Task_1task_ex1">
<h4>Basic Task Example<a class="headerlink" href="#classespp_1_1Task_1task_ex1" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate" id="classespp_1_1Task_1task_ex1"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">configure_task_watchdog</span><span class="p">(</span><span class="mi">1000</span><span class="n">ms</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">condition_variable</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">static</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Task: #iterations = {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">);</span>
<span class="w">      </span><span class="n">task_iterations</span><span class="o">++</span><span class="p">;</span>
<span class="w">      </span><span class="c1">// NOTE: sleeping in this way allows the sleep to exit early when the</span>
<span class="w">      </span><span class="c1">// task is being stopped / destroyed</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">unique_lock</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lk</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
<span class="w">        </span><span class="n">cv</span><span class="p">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">lk</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="n">ms</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="c1">// we don&#39;t want to stop, so return false</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="p">({.</span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_fn</span><span class="p">,</span>
<span class="w">                            </span><span class="p">.</span><span class="n">task_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Task 1&quot;</span><span class="p">},</span>
<span class="w">                            </span><span class="p">.</span><span class="n">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Logger</span><span class="o">::</span><span class="n">Verbosity</span><span class="o">::</span><span class="n">DEBUG</span><span class="p">});</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">start_watchdog</span><span class="p">();</span><span class="w"> </span><span class="c1">// start the watchdog timer for this task</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="n">num_seconds_to_run</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="n">s</span><span class="p">);</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">stop_watchdog</span><span class="p">();</span><span class="w"> </span><span class="c1">// stop the watchdog timer for this task</span>
<span class="w">    </span><span class="c1">// show explicitly stopping the task (though the destructor called at the</span>
<span class="w">    </span><span class="c1">// end of this scope would do it for us)</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">stop</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">error_code</span><span class="w"> </span><span class="n">ec</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">watchdog_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">get_watchdog_info</span><span class="p">(</span><span class="n">ec</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ec</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Error getting watchdog info: {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ec</span><span class="p">.</span><span class="n">message</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">watchdog_info</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Watchdog info: {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">watchdog_info</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;No watchdog info available</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="classespp_1_1Task_1task_ex2">
<h4>Task Watchdog Example<a class="headerlink" href="#classespp_1_1Task_1task_ex2" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate" id="classespp_1_1Task_1task_ex2"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="n">panic_on_watchdog_timeout</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">configure_task_watchdog</span><span class="p">(</span><span class="mi">300</span><span class="n">ms</span><span class="p">,</span><span class="w"> </span><span class="n">panic_on_watchdog_timeout</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">condition_variable</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">static</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Task: #iterations = {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">);</span>
<span class="w">      </span><span class="n">task_iterations</span><span class="o">++</span><span class="p">;</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">unique_lock</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lk</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
<span class="w">      </span><span class="c1">// note our sleep here is longer than the watchdog timeout, so we should</span>
<span class="w">      </span><span class="c1">// trigger the watchdog timeout</span>
<span class="w">      </span><span class="n">cv</span><span class="p">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">lk</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="n">ms</span><span class="p">);</span>
<span class="w">      </span><span class="c1">// we don&#39;t want to stop, so return false</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="p">({.</span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_fn</span><span class="p">,</span>
<span class="w">                            </span><span class="p">.</span><span class="n">task_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Task 1&quot;</span><span class="p">},</span>
<span class="w">                            </span><span class="p">.</span><span class="n">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Logger</span><span class="o">::</span><span class="n">Verbosity</span><span class="o">::</span><span class="n">DEBUG</span><span class="p">});</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">start_watchdog</span><span class="p">();</span><span class="w"> </span><span class="c1">// start the watchdog timer for this task</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">500</span><span class="n">ms</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">error_code</span><span class="w"> </span><span class="n">ec</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">watchdog_info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">get_watchdog_info</span><span class="p">(</span><span class="n">ec</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ec</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Error getting watchdog info: {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ec</span><span class="p">.</span><span class="n">message</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">watchdog_info</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Watchdog info: {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">watchdog_info</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;No watchdog info available</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// NOTE: the task and the watchdog will both automatically get stopped when</span>
<span class="w">    </span><span class="c1">// the task goes out of scope and is destroyed.</span>
</pre></div>
</div>
</section>
<section id="classespp_1_1Task_1task_ex3">
<h4>Many Task Example<a class="headerlink" href="#classespp_1_1Task_1task_ex3" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate" id="classespp_1_1Task_1task_ex3"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">tasks</span><span class="p">;</span>
<span class="w">    </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_tasks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;Many task example: spawning {} tasks!&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">num_tasks</span><span class="p">);</span>
<span class="w">    </span><span class="n">tasks</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">num_tasks</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">start</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">num_tasks</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">size_t</span><span class="w"> </span><span class="n">iterations</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">      </span><span class="c1">// copy the loop variables and indicate that we intend to mutate them!</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">iterations</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">condition_variable</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cv</span><span class="p">)</span><span class="w"> </span><span class="k">mutable</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Task {}: #iterations = {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="n">iterations</span><span class="p">);</span>
<span class="w">        </span><span class="n">iterations</span><span class="o">++</span><span class="p">;</span>
<span class="w">        </span><span class="c1">// NOTE: sleeping in this way allows the sleep to exit early when the</span>
<span class="w">        </span><span class="c1">// task is being stopped / destroyed</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="n">std</span><span class="o">::</span><span class="n">unique_lock</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lk</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
<span class="w">          </span><span class="n">cv</span><span class="p">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">lk</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="n">s</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">        </span><span class="c1">// we don&#39;t want to stop, so return false</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">      </span><span class="p">};</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">task_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fmt</span><span class="o">::</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;Task {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">=</span>
<span class="w">          </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">make_unique</span><span class="p">({.</span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_fn</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">task_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_name</span><span class="p">}});</span>
<span class="w">      </span><span class="n">tasks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">task</span><span class="p">);</span>
<span class="w">      </span><span class="n">tasks</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">-&gt;</span><span class="n">start</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Tasks spawned, waiting for {} seconds!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">num_seconds_to_run</span><span class="p">);</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_until</span><span class="p">(</span><span class="n">start</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">num_seconds_to_run</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="classespp_1_1Task_1task_ex4">
<h4>Long Running Task Example<a class="headerlink" href="#classespp_1_1Task_1task_ex4" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate" id="classespp_1_1Task_1task_ex4"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">condition_variable</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">static</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_steps_per_iteration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Task processing iteration {}...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">);</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">num_steps_per_iteration</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// NOTE: sleeping in this way allows the sleep to exit early when the</span>
<span class="w">        </span><span class="c1">// task is being stopped / destroyed</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="n">std</span><span class="o">::</span><span class="n">unique_lock</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lk</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
<span class="w">          </span><span class="c1">// NOTE: using the return value from the cv.wait_for() allows us to</span>
<span class="w">          </span><span class="c1">// know if the task was asked to stop, for which we can handle and</span>
<span class="w">          </span><span class="c1">// return early.</span>
<span class="w">          </span><span class="k">auto</span><span class="w"> </span><span class="n">cv_retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="p">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">lk</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">));</span>
<span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">cv_retval</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cv_status</span><span class="o">::</span><span class="n">no_timeout</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// if there was no timeout, then we were notified, therefore we need</span>
<span class="w">            </span><span class="c1">// to shut down.</span>
<span class="w">            </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Task stopping early (step {}/{}) on iteration {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span>
<span class="w">                       </span><span class="n">num_steps_per_iteration</span><span class="p">,</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// NOTE: use this_thread::sleep_for() to fake cleaning up work that</span>
<span class="w">            </span><span class="c1">// we would do</span>
<span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">10</span><span class="n">ms</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// now that we&#39;ve (fake) cleaned-up our work, return from the task</span>
<span class="w">            </span><span class="c1">// function so the task can fully destruct.</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Task processing iteration {} complete</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">);</span>
<span class="w">      </span><span class="n">task_iterations</span><span class="o">++</span><span class="p">;</span>
<span class="w">      </span><span class="c1">// we don&#39;t want to stop, so return false</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="p">({.</span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_fn</span><span class="p">,</span>
<span class="w">                            </span><span class="p">.</span><span class="n">task_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Complex Task&quot;</span><span class="p">},</span>
<span class="w">                            </span><span class="p">.</span><span class="n">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Logger</span><span class="o">::</span><span class="n">Verbosity</span><span class="o">::</span><span class="n">DEBUG</span><span class="p">});</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="classespp_1_1Task_1task_ex5">
<h4>Long Running Task Notified Example (Recommended)<a class="headerlink" href="#classespp_1_1Task_1task_ex5" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate" id="classespp_1_1Task_1task_ex5"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">condition_variable</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cv</span><span class="p">,</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="o">&amp;</span><span class="n">task_notified</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">static</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">      </span><span class="k">const</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_steps_per_iteration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="p">;</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Task processing iteration {}...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">);</span>
<span class="w">      </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">num_steps_per_iteration</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// NOTE: sleeping in this way allows the sleep to exit early when the</span>
<span class="w">        </span><span class="c1">// task is being stopped / destroyed</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="n">std</span><span class="o">::</span><span class="n">unique_lock</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lk</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
<span class="w">          </span><span class="c1">// NOTE: using the return value from the cv.wait_for() allows us to</span>
<span class="w">          </span><span class="c1">// know if the task was asked to stop, for which we can handle and</span>
<span class="w">          </span><span class="c1">// return early.</span>
<span class="w">          </span><span class="k">auto</span><span class="w"> </span><span class="n">stop_requested</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cv</span><span class="p">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">lk</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">milliseconds</span><span class="p">(</span><span class="mi">100</span><span class="p">),</span>
<span class="w">                                            </span><span class="p">[</span><span class="o">&amp;</span><span class="n">task_notified</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">task_notified</span><span class="p">;</span><span class="w"> </span><span class="p">});</span>
<span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">stop_requested</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Task was notified, stopping early (step {}/{}) on iteration {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">i</span><span class="p">,</span>
<span class="w">                       </span><span class="n">num_steps_per_iteration</span><span class="p">,</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// NOTE: use this_thread::sleep_for() to fake cleaning up work that</span>
<span class="w">            </span><span class="c1">// we would do</span>
<span class="w">            </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">10</span><span class="n">ms</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// now that we&#39;ve (fake) cleaned-up our work, return from the task</span>
<span class="w">            </span><span class="c1">// function so the task can fully destruct.</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Task processing iteration {} complete</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">);</span>
<span class="w">      </span><span class="n">task_iterations</span><span class="o">++</span><span class="p">;</span>
<span class="w">      </span><span class="c1">// we don&#39;t want to stop, so return false</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="p">({.</span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_fn</span><span class="p">,</span>
<span class="w">                            </span><span class="p">.</span><span class="n">task_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Notified Complex Task&quot;</span><span class="p">},</span>
<span class="w">                            </span><span class="p">.</span><span class="n">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Logger</span><span class="o">::</span><span class="n">Verbosity</span><span class="o">::</span><span class="n">DEBUG</span><span class="p">});</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
</pre></div>
</div>
</section>
<section id="classespp_1_1Task_1task_ex6">
<h4>Task Info Example<a class="headerlink" href="#classespp_1_1Task_1task_ex6" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate" id="classespp_1_1Task_1task_ex6"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">condition_variable</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">static</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">      </span><span class="n">task_iterations</span><span class="o">++</span><span class="p">;</span>
<span class="w">      </span><span class="c1">// allocate stack</span>
<span class="w">      </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num_bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">256</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">task_iterations</span><span class="p">;</span>
<span class="w">      </span><span class="kt">char</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">num_bytes</span><span class="p">];</span>
<span class="w">      </span><span class="c1">// do something with the bufer (which also uses stack)</span>
<span class="w">      </span><span class="n">snprintf</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="n">num_bytes</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%.06f</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">task_iterations</span><span class="p">);</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;{}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">get_info</span><span class="p">());</span>
<span class="w">      </span><span class="c1">// NOTE: sleeping in this way allows the sleep to exit early when the</span>
<span class="w">      </span><span class="c1">// task is being stopped / destroyed</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">unique_lock</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lk</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
<span class="w">        </span><span class="n">cv</span><span class="p">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">lk</span><span class="p">,</span><span class="w"> </span><span class="mi">500</span><span class="n">ms</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="c1">// we don&#39;t want to stop, so return false</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="p">({.</span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_fn</span><span class="p">,</span>
<span class="w">                            </span><span class="p">.</span><span class="n">task_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;DynamicTask&quot;</span><span class="p">},</span>
<span class="w">                            </span><span class="p">.</span><span class="n">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Logger</span><span class="o">::</span><span class="n">Verbosity</span><span class="o">::</span><span class="n">DEBUG</span><span class="p">});</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">elapsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">now</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">test_start</span><span class="p">).</span><span class="n">count</span><span class="p">();</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">elapsed</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">num_seconds_to_run</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">200</span><span class="n">ms</span><span class="p">);</span>
<span class="w">      </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">      </span><span class="n">elapsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">now</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">test_start</span><span class="p">).</span><span class="n">count</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Final: {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="o">::</span><span class="n">get_info</span><span class="p">(</span><span class="n">task</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="classespp_1_1Task_1task_ex7">
<h4>Task Request Stop Example<a class="headerlink" href="#classespp_1_1Task_1task_ex7" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate" id="classespp_1_1Task_1task_ex7"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="o">&amp;</span><span class="n">num_seconds_to_run</span><span class="p">](</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="w"> </span><span class="o">&amp;</span><span class="n">m</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">condition_variable</span><span class="w"> </span><span class="o">&amp;</span><span class="n">cv</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">static</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">begin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">now</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">high_resolution_clock</span><span class="o">::</span><span class="n">now</span><span class="p">();</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">elapsed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">chrono</span><span class="o">::</span><span class="n">duration</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">now</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">begin</span><span class="p">).</span><span class="n">count</span><span class="p">();</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">elapsed</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">num_seconds_to_run</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// we&#39;ve gone long enough, time to stop our task!</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="c1">// NOTE: sleeping in this way allows the sleep to exit early when the</span>
<span class="w">      </span><span class="c1">// task is being stopped / destroyed</span>
<span class="w">      </span><span class="p">{</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">unique_lock</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">mutex</span><span class="o">&gt;</span><span class="w"> </span><span class="n">lk</span><span class="p">(</span><span class="n">m</span><span class="p">);</span>
<span class="w">        </span><span class="n">cv</span><span class="p">.</span><span class="n">wait_for</span><span class="p">(</span><span class="n">lk</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="n">ms</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="c1">// we don&#39;t want to stop yet, so return false</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Task</span><span class="p">({.</span><span class="n">callback</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">task_fn</span><span class="p">,</span>
<span class="w">                            </span><span class="p">.</span><span class="n">task_config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;AutoStop Task&quot;</span><span class="p">},</span>
<span class="w">                            </span><span class="p">.</span><span class="n">log_level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">Logger</span><span class="o">::</span><span class="n">Verbosity</span><span class="o">::</span><span class="n">DEBUG</span><span class="p">});</span>
<span class="w">    </span><span class="n">task</span><span class="p">.</span><span class="n">start</span><span class="p">();</span>
<span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">task</span><span class="p">.</span><span class="n">is_started</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">10</span><span class="n">ms</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
</section>
<section id="classespp_1_1Task_1run_on_core_ex1">
<h4>Run on Core Example<a class="headerlink" href="#classespp_1_1Task_1run_on_core_ex1" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate" id="classespp_1_1Task_1run_on_core_ex1"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;espp::task::run_on_core example: main thread core ID: {}&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xPortGetCoreID</span><span class="p">());</span>
<span class="w">    </span><span class="c1">// NOTE: in these examples, because we&#39;re logging with libfmt in the</span>
<span class="w">    </span><span class="c1">// function to be run, we need a little more than the default 2k stack size,</span>
<span class="w">    </span><span class="c1">// so we&#39;re using 3k.</span>

<span class="w">    </span><span class="c1">// test running a function that returns void on a specific core</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Void Task running on core {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xPortGetCoreID</span><span class="p">());</span><span class="w"> </span><span class="p">};</span>
<span class="w">    </span><span class="n">espp</span><span class="o">::</span><span class="n">task</span><span class="o">::</span><span class="n">run_on_core</span><span class="p">(</span><span class="n">task_fn</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<span class="w">    </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Void Function returned</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">espp</span><span class="o">::</span><span class="n">task</span><span class="o">::</span><span class="n">run_on_core</span><span class="p">(</span><span class="n">task_fn</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<span class="w">    </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Void Function returned</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// test running a function that returns bool on a specific core</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">bool</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">core_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xPortGetCoreID</span><span class="p">();</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Bool Task running on core {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">core_id</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">core_id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">result0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">task</span><span class="o">::</span><span class="n">run_on_core</span><span class="p">(</span><span class="n">task_fn2</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<span class="w">    </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Bool Function returned {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result0</span><span class="p">);</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">result1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">task</span><span class="o">::</span><span class="n">run_on_core</span><span class="p">(</span>
<span class="w">        </span><span class="n">task_fn2</span><span class="p">,</span><span class="w"> </span><span class="p">{.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">stack_size_bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">core_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">});</span>
<span class="w">    </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Bool Function returned {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result1</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// test running a function that returns esp_err_t on a specific core</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">esp_err_t</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">auto</span><span class="w"> </span><span class="n">core_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">xPortGetCoreID</span><span class="p">();</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;esp_err_t Task running on core {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">core_id</span><span class="p">);</span>
<span class="w">      </span><span class="k">return</span><span class="w"> </span><span class="n">core_id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="n">ESP_OK</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">ESP_FAIL</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">err0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">task</span><span class="o">::</span><span class="n">run_on_core</span><span class="p">(</span><span class="n">task_fn3</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<span class="w">    </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;esp_err_t Function returned {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">esp_err_to_name</span><span class="p">(</span><span class="n">err0</span><span class="p">));</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">err1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">espp</span><span class="o">::</span><span class="n">task</span><span class="o">::</span><span class="n">run_on_core</span><span class="p">(</span><span class="n">task_fn3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<span class="w">    </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;esp_err_t Function returned {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">esp_err_to_name</span><span class="p">(</span><span class="n">err1</span><span class="p">));</span>
</pre></div>
</div>
</section>
<section id="classespp_1_1Task_1run_on_core_ex2">
<h4>Run on Core (Non-Blocking) Example<a class="headerlink" href="#classespp_1_1Task_1run_on_core_ex2" title="Permalink to this heading"></a></h4>
<div class="highlight-cpp notranslate" id="classespp_1_1Task_1run_on_core_ex2"><div class="highlight"><pre><span></span><span class="w">    </span><span class="n">logger</span><span class="p">.</span><span class="n">info</span><span class="p">(</span><span class="s">&quot;espp::task::run_on_core non-blocking example: main thread core ID: {}&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="n">xPortGetCoreID</span><span class="p">());</span>
<span class="w">    </span><span class="c1">// NOTE: in these examples, because we&#39;re logging with libfmt in the</span>
<span class="w">    </span><span class="c1">// function to be run, we need a little more than the default 2k stack size,</span>
<span class="w">    </span><span class="c1">// so we&#39;re using 3k.</span>

<span class="w">    </span><span class="c1">// test running a function which takes a while to complete</span>
<span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">task_fn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[]()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;[{0}] Task running on core {0}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xPortGetCoreID</span><span class="p">());</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">1</span><span class="n">s</span><span class="p">);</span>
<span class="w">      </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;[{0}] Task done!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">xPortGetCoreID</span><span class="p">());</span>
<span class="w">    </span><span class="p">};</span>
<span class="w">    </span><span class="n">espp</span><span class="o">::</span><span class="n">task</span><span class="o">::</span><span class="n">run_on_core_non_blocking</span><span class="p">(</span><span class="n">task_fn</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">1024</span><span class="p">);</span>
<span class="w">    </span><span class="n">espp</span><span class="o">::</span><span class="n">task</span><span class="o">::</span><span class="n">run_on_core_non_blocking</span><span class="p">(</span><span class="n">task_fn</span><span class="p">,</span><span class="w"> </span><span class="p">{.</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;test&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">.</span><span class="n">core_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">});</span>
<span class="w">    </span><span class="n">fmt</span><span class="o">::</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;Started tasks on cores 0 and 1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// sleep for a bit to let the tasks run</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">this_thread</span><span class="o">::</span><span class="n">sleep_for</span><span class="p">(</span><span class="mi">2</span><span class="n">s</span><span class="p">);</span>
</pre></div>
</div>
</section>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-types">Public Types</p>
<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task25callback_m_cv_notified_fnE">
<span id="_CPPv3N4espp4Task25callback_m_cv_notified_fnE"></span><span id="_CPPv2N4espp4Task25callback_m_cv_notified_fnE"></span><span id="espp::Task::callback_m_cv_notified_fn"></span><span class="target" id="classespp_1_1Task_1a80b5f2c263c878a4057652e50c2a7b9b"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">bool</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">mutex</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n"><span class="pre">m</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">condition_variable</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n"><span class="pre">cv</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n"><span class="pre">notified</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">callback_m_cv_notified_fn</span></span></span><a class="headerlink" href="#_CPPv4N4espp4Task25callback_m_cv_notified_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p><a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> callback function signature. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The callback is run repeatedly within the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a>, therefore it MUST return, and also SHOULD have a sleep to give the processor over to other tasks. For this reason, the callback is provided a std::condition_variable (and associated mutex) which the callback can use when they need to wait. If the cv.wait_for / cv.wait_until return false, no action is necessary (as the timeout properly occurred / the task was not notified). If they return true, then the callback function should return immediately since the task is being stopped (optionally performing any task-specific tear-down).</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param m<span class="colon">:</span></dt>
<dd class="field-odd"><p>mutex associated with the condition variable (should be locked before calling cv.wait_for() or cv.wait_until())</p>
</dd>
<dt class="field-even">Param cv<span class="colon">:</span></dt>
<dd class="field-even"><p>condition variable the callback can use to perform an interruptible wait. Use the notified parameter as the predicate for the wait to ensure spurious wake-ups are properly ignored.</p>
</dd>
<dt class="field-odd">Param notified<span class="colon">:</span></dt>
<dd class="field-odd"><p>Whether or not the task has been notified to stop. This is a reference to the task’s notified member, and is intended to be used with the condition variable parameter cv when waiting to avoid spurious wakeups. The task function is responsible for clearing this flag after each wait. Do not release the lock on the mutex m until the notified flag has been checked and cleared.</p>
</dd>
<dt class="field-even">Return<span class="colon">:</span></dt>
<dd class="field-even"><p>Whether or not the callback’s thread / task should stop - True to stop, false to continue running. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task16callback_m_cv_fnE">
<span id="_CPPv3N4espp4Task16callback_m_cv_fnE"></span><span id="_CPPv2N4espp4Task16callback_m_cv_fnE"></span><span id="espp::Task::callback_m_cv_fn"></span><span class="target" id="classespp_1_1Task_1acea84002dfa8826638e121796c880177"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">bool</span></span><span class="p"><span class="pre">(</span></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">mutex</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n"><span class="pre">m</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">condition_variable</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n"><span class="pre">cv</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">callback_m_cv_fn</span></span></span><a class="headerlink" href="#_CPPv4N4espp4Task16callback_m_cv_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p><a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> callback function signature. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The callback is run repeatedly within the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a>, therefore it MUST return, and also SHOULD have a sleep to give the processor over to other tasks. For this reason, the callback is provided a std::condition_variable (and associated mutex) which the callback can use when they need to wait. If the cv.wait_for / cv.wait_until return <a class="reference external" href="https://en.cppreference.com/w/cpp/thread/cv_status">std::cv_status::timeout</a>, no action is necessary, but if they return <a class="reference external" href="https://en.cppreference.com/w/cpp/thread/cv_status">std::cv_status::no_timeout</a>, then the function should return immediately since the task is being stopped (optionally performing any task-specific tear-down).</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is an older callback function signature, and is kept for backwards compatibility. It is recommended to use the newer callback signature (callback_m_cv_notified_fn) which includes the notified parameter, enabling the task callback function to wait on the condition variable and ignore spurious wakeups.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Param m<span class="colon">:</span></dt>
<dd class="field-odd"><p>mutex associated with the condition variable (should be locked before calling cv.wait_for() or cv.wait_until())</p>
</dd>
<dt class="field-even">Param cv<span class="colon">:</span></dt>
<dd class="field-even"><p>condition variable the callback can use to perform an interruptible wait.</p>
</dd>
<dt class="field-odd">Return<span class="colon">:</span></dt>
<dd class="field-odd"><p>Whether or not the callback’s thread / task should stop - True to stop, false to continue running. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task21callback_no_params_fnE">
<span id="_CPPv3N4espp4Task21callback_no_params_fnE"></span><span id="_CPPv2N4espp4Task21callback_no_params_fnE"></span><span id="espp::Task::callback_no_params_fn"></span><span class="target" id="classespp_1_1Task_1ae9607d70f61071c7696a24982c1c0f34"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">function</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">bool</span></span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">callback_no_params_fn</span></span></span><a class="headerlink" href="#_CPPv4N4espp4Task21callback_no_params_fnE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Simple callback function signature. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The callback is run repeatedly within the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a>, therefore it MUST return, and also SHOULD have a sleep to give the processor over to other tasks.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Return<span class="colon">:</span></dt>
<dd class="field-odd"><p>True to stop the task, false to continue running. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp type">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task16callback_variantE">
<span id="_CPPv3N4espp4Task16callback_variantE"></span><span id="_CPPv2N4espp4Task16callback_variantE"></span><span id="espp::Task::callback_variant"></span><span class="target" id="classespp_1_1Task_1aa9b8a71d2ab0724c322e1ebcd3daa3fe"></span><span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">variant</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4N4espp4Task25callback_m_cv_notified_fnE" title="espp::Task::callback_m_cv_notified_fn"><span class="n"><span class="pre">callback_m_cv_notified_fn</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N4espp4Task16callback_m_cv_fnE" title="espp::Task::callback_m_cv_fn"><span class="n"><span class="pre">callback_m_cv_fn</span></span></a><span class="p"><span class="pre">,</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N4espp4Task21callback_no_params_fnE" title="espp::Task::callback_no_params_fn"><span class="n"><span class="pre">callback_no_params_fn</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">callback_variant</span></span></span><a class="headerlink" href="#_CPPv4N4espp4Task16callback_variantE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Variant of the callback function for the task. </p>
<p>
This is primarily used to enable simpler API upgrades in the future and maximize backwards compatibility. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a std::variant of the different callback function signatures that can be used with the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a>. This allows the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> to be configured with a callback function that takes no parameters, a callback function that takes a mutex and condition variable, or a callback function that takes a mutex, condition variable, and a bool reference to the notified flag.</p>
</div>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-functions">Public Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task4TaskERKN4espp4Task6ConfigE">
<span id="_CPPv3N4espp4Task4TaskERKN4espp4Task6ConfigE"></span><span id="_CPPv2N4espp4Task4TaskERKN4espp4Task6ConfigE"></span><span id="espp::Task::Task__espp::Task::ConfigCR"></span><span class="target" id="classespp_1_1Task_1a269ad3e8c3b839ad4888caea341b8c42"></span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Task</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task6ConfigE" title="espp::Task::Config"><span class="n"><span class="pre">Config</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task4TaskERKN4espp4Task6ConfigE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Construct a new <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> object using the <a class="reference internal" href="#structespp_1_1Task_1_1Config"><span class="std std-ref">Config</span></a> struct. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> – <a class="reference internal" href="#structespp_1_1Task_1_1Config"><span class="std std-ref">Config</span></a> struct to initialize the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> with. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task4TaskERKN4espp4Task21callback_no_params_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE">
<span id="_CPPv3N4espp4Task4TaskERKN4espp4Task21callback_no_params_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE"></span><span id="_CPPv2N4espp4Task4TaskERKN4espp4Task21callback_no_params_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE"></span><span id="espp::Task::Task__espp::Task::callback_no_params_fnCR.espp::Task::BaseConfigCR.espp::Logger::Verbosity"></span><span class="target" id="classespp_1_1Task_1a6871a96dc74269369dd8c05e62207557"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Task</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task21callback_no_params_fnE" title="espp::Task::callback_no_params_fn"><span class="n"><span class="pre">callback_no_params_fn</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">callback</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task10BaseConfigE" title="espp::Task::BaseConfig"><span class="n"><span class="pre">BaseConfig</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">config</span></span>, <span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">log_level</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9Verbosity4WARNE" title="espp::Logger::Verbosity::WARN"><span class="n"><span class="pre">WARN</span></span></a><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task4TaskERKN4espp4Task21callback_no_params_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Construct a new <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> object using the callback function and <a class="reference internal" href="#structespp_1_1Task_1_1BaseConfig"><span class="std std-ref">BaseConfig</span></a> struct. </p>
<p>This is a convenience constructor that allows you to create a <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> with a callback function and a <a class="reference internal" href="#structespp_1_1Task_1_1BaseConfig"><span class="std std-ref">BaseConfig</span></a> struct, without having to create a <a class="reference internal" href="#structespp_1_1Task_1_1Config"><span class="std std-ref">Config</span></a> struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback</strong> – Callback function for the task. </p></li>
<li><p><strong>config</strong> – <a class="reference internal" href="#structespp_1_1Task_1_1BaseConfig"><span class="std std-ref">BaseConfig</span></a> struct to initialize the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> with. </p></li>
<li><p><strong>log_level</strong> – Log verbosity for the task. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task4TaskERKN4espp4Task16callback_m_cv_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE">
<span id="_CPPv3N4espp4Task4TaskERKN4espp4Task16callback_m_cv_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE"></span><span id="_CPPv2N4espp4Task4TaskERKN4espp4Task16callback_m_cv_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE"></span><span id="espp::Task::Task__espp::Task::callback_m_cv_fnCR.espp::Task::BaseConfigCR.espp::Logger::Verbosity"></span><span class="target" id="classespp_1_1Task_1a870db7ef7a4ed7212702e881cd7e95d2"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Task</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task16callback_m_cv_fnE" title="espp::Task::callback_m_cv_fn"><span class="n"><span class="pre">callback_m_cv_fn</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">callback</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task10BaseConfigE" title="espp::Task::BaseConfig"><span class="n"><span class="pre">BaseConfig</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">config</span></span>, <span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">log_level</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9Verbosity4WARNE" title="espp::Logger::Verbosity::WARN"><span class="n"><span class="pre">WARN</span></span></a><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task4TaskERKN4espp4Task16callback_m_cv_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Construct a new <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> object using the callback function and <a class="reference internal" href="#structespp_1_1Task_1_1BaseConfig"><span class="std std-ref">BaseConfig</span></a> struct. </p>
<p>This is a convenience constructor that allows you to create a <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> with a callback function that takes a mutex and condition variable, and a <a class="reference internal" href="#structespp_1_1Task_1_1BaseConfig"><span class="std std-ref">BaseConfig</span></a> struct, without having to create a <a class="reference internal" href="#structespp_1_1Task_1_1Config"><span class="std std-ref">Config</span></a> struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback</strong> – Callback function for the task. </p></li>
<li><p><strong>config</strong> – <a class="reference internal" href="#structespp_1_1Task_1_1BaseConfig"><span class="std std-ref">BaseConfig</span></a> struct to initialize the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> with. </p></li>
<li><p><strong>log_level</strong> – Log verbosity for the task. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task4TaskERKN4espp4Task25callback_m_cv_notified_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE">
<span id="_CPPv3N4espp4Task4TaskERKN4espp4Task25callback_m_cv_notified_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE"></span><span id="_CPPv2N4espp4Task4TaskERKN4espp4Task25callback_m_cv_notified_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE"></span><span id="espp::Task::Task__espp::Task::callback_m_cv_notified_fnCR.espp::Task::BaseConfigCR.espp::Logger::Verbosity"></span><span class="target" id="classespp_1_1Task_1abb2ce99b468f0003f478fefc994a806b"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">explicit</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Task</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task25callback_m_cv_notified_fnE" title="espp::Task::callback_m_cv_notified_fn"><span class="n"><span class="pre">callback_m_cv_notified_fn</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">callback</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task10BaseConfigE" title="espp::Task::BaseConfig"><span class="n"><span class="pre">BaseConfig</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">config</span></span>, <span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">log_level</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9Verbosity4WARNE" title="espp::Logger::Verbosity::WARN"><span class="n"><span class="pre">WARN</span></span></a><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task4TaskERKN4espp4Task25callback_m_cv_notified_fnERKN4espp4Task10BaseConfigEN4espp6Logger9VerbosityE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Construct a new <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> object using the callback function and <a class="reference internal" href="#structespp_1_1Task_1_1BaseConfig"><span class="std std-ref">BaseConfig</span></a> struct. </p>
<p>This is a convenience constructor that allows you to create a <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> with a callback function that takes a mutex, condition variable, and a bool reference to the notified flag, and a <a class="reference internal" href="#structespp_1_1Task_1_1BaseConfig"><span class="std std-ref">BaseConfig</span></a> struct, without having to create a <a class="reference internal" href="#structespp_1_1Task_1_1Config"><span class="std std-ref">Config</span></a> struct.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>callback</strong> – Callback function for the task. </p></li>
<li><p><strong>config</strong> – <a class="reference internal" href="#structespp_1_1Task_1_1BaseConfig"><span class="std std-ref">BaseConfig</span></a> struct to initialize the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> with. </p></li>
<li><p><strong>log_level</strong> – Log verbosity for the task. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4TaskD0Ev">
<span id="_CPPv3N4espp4TaskD0Ev"></span><span id="_CPPv2N4espp4TaskD0Ev"></span><span id="espp::Task::~Task"></span><span class="target" id="classespp_1_1Task_1ab008a053adcc0c93cc0cfcb2fe2396b7"></span><span class="sig-name descname"><span class="n"><span class="pre">~Task</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4TaskD0Ev" title="Permalink to this definition"></a><br /></dt>
<dd><p>Destroy the task, stopping it if it was started. </p>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task5startEv">
<span id="_CPPv3N4espp4Task5startEv"></span><span id="_CPPv2N4espp4Task5startEv"></span><span id="espp::Task::start"></span><span class="target" id="classespp_1_1Task_1a8fd50f31d32181c26dc96d4040cb6fec"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">start</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task5startEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Start executing the task. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if the task started, false if it was already started. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task4stopEv">
<span id="_CPPv3N4espp4Task4stopEv"></span><span id="_CPPv2N4espp4Task4stopEv"></span><span id="espp::Task::stop"></span><span class="target" id="classespp_1_1Task_1af73bba20616458f6ed571955721bca44"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stop</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task4stopEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stop the task execution. </p>
<p>This will request the task to stop, notify the condition variable, and (if this calling context is not the task context) join the thread. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if the task stopped, false if it was not started / already stopped. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK4espp4Task10is_startedEv">
<span id="_CPPv3NK4espp4Task10is_startedEv"></span><span id="_CPPv2NK4espp4Task10is_startedEv"></span><span id="espp::Task::is_startedC"></span><span class="target" id="classespp_1_1Task_1aa30256fb084dc22b5799861788fdc460"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">is_started</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK4espp4Task10is_startedEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Has the task been started or not? </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if the task is started / running, false otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK4espp4Task10is_runningEv">
<span id="_CPPv3NK4espp4Task10is_runningEv"></span><span id="_CPPv2NK4espp4Task10is_runningEv"></span><span id="espp::Task::is_runningC"></span><span class="target" id="classespp_1_1Task_1a42b45ba664ccad92028e0e0ec17dabe0"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">is_running</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK4espp4Task10is_runningEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Is the task running? </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if the task is running, false otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task14start_watchdogEv">
<span id="_CPPv3N4espp4Task14start_watchdogEv"></span><span id="_CPPv2N4espp4Task14start_watchdogEv"></span><span id="espp::Task::start_watchdog"></span><span class="target" id="classespp_1_1Task_1ad6cfde844f4dd08cf48b5f0ac561206b"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">start_watchdog</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task14start_watchdogEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Start the task watchdog for this task. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is only available on ESP </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will do nothing unless CONFIG_ESP_TASK_WDT_EN is enabled in the menuconfig. Default is y (enabled). </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if the watchdog was started, false otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task13stop_watchdogEv">
<span id="_CPPv3N4espp4Task13stop_watchdogEv"></span><span id="_CPPv2N4espp4Task13stop_watchdogEv"></span><span id="espp::Task::stop_watchdog"></span><span class="target" id="classespp_1_1Task_1ae79526491235c6fc2484133f072f9e91"></span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stop_watchdog</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task13stop_watchdogEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stop the task watchdog for this task. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is only available on ESP </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will do nothing unless CONFIG_ESP_TASK_WDT_EN is enabled in the menuconfig. Default is y (enabled). </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>true if the watchdog was stopped, false otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK4espp4Task6get_idEv">
<span id="_CPPv3NK4espp4Task6get_idEv"></span><span id="_CPPv2NK4espp4Task6get_idEv"></span><span id="espp::Task::get_idC"></span><span class="target" id="classespp_1_1Task_1a238d391619a4c58cd9e56b013b2574f6"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">task_id_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">get_id</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK4espp4Task6get_idEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the ID for this <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a>’s thread / task context. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>ID for this <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a>’s thread / task context. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK4espp4Task8get_nameEv">
<span id="_CPPv3NK4espp4Task8get_nameEv"></span><span id="_CPPv2NK4espp4Task8get_nameEv"></span><span id="espp::Task::get_nameC"></span><span class="target" id="classespp_1_1BaseComponent_1ad3813fa0c9c026e217163c4e2fdfc4a2"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="sig-name descname"><span class="n"><span class="pre">get_name</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK4espp4Task8get_nameEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the name of the component </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is the tag of the logger </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>A const reference to the name of the component </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task11set_log_tagERKNSt11string_viewE">
<span id="_CPPv3N4espp4Task11set_log_tagERKNSt11string_viewE"></span><span id="_CPPv2N4espp4Task11set_log_tagERKNSt11string_viewE"></span><span id="espp::Task::set_log_tag__std::string_viewCR"></span><span class="target" id="classespp_1_1BaseComponent_1af83083445936081581ffbddd93634b90"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">set_log_tag</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string_view</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">tag</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task11set_log_tagERKNSt11string_viewE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the tag for the logger </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>tag</strong> – The tag to use for the logger </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK4espp4Task13get_log_levelEv">
<span id="_CPPv3NK4espp4Task13get_log_levelEv"></span><span id="_CPPv2NK4espp4Task13get_log_levelEv"></span><span id="espp::Task::get_log_levelC"></span><span class="target" id="classespp_1_1BaseComponent_1a54f34a70b117486a7055e4a6f1d4d7a8"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">get_log_level</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK4espp4Task13get_log_levelEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the log level for the logger <div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="logger.html#classespp_1_1Logger_1ac6c63313236b0ae6ff44f3f94a6f99cb"><span class="std std-ref">Logger::Verbosity</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="logger.html#classespp_1_1Logger_1aa8c260085619fd42e17b92c41a638741"><span class="std std-ref">Logger::set_verbosity</span></a></p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The verbosity level of the logger </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task13set_log_levelEN4espp6Logger9VerbosityE">
<span id="_CPPv3N4espp4Task13set_log_levelEN4espp6Logger9VerbosityE"></span><span id="_CPPv2N4espp4Task13set_log_levelEN4espp6Logger9VerbosityE"></span><span id="espp::Task::set_log_level__espp::Logger::Verbosity"></span><span class="target" id="classespp_1_1BaseComponent_1a3159df4e466f93ebb6cca7e685d27243"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">set_log_level</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">level</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task13set_log_levelEN4espp6Logger9VerbosityE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the log level for the logger <div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="logger.html#classespp_1_1Logger_1ac6c63313236b0ae6ff44f3f94a6f99cb"><span class="std std-ref">Logger::Verbosity</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="logger.html#classespp_1_1Logger_1aa8c260085619fd42e17b92c41a638741"><span class="std std-ref">Logger::set_verbosity</span></a></p>
</div>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>level</strong> – The verbosity level to use for the logger </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task17set_log_verbosityEN4espp6Logger9VerbosityE">
<span id="_CPPv3N4espp4Task17set_log_verbosityEN4espp6Logger9VerbosityE"></span><span id="_CPPv2N4espp4Task17set_log_verbosityEN4espp6Logger9VerbosityE"></span><span id="espp::Task::set_log_verbosity__espp::Logger::Verbosity"></span><span class="target" id="classespp_1_1BaseComponent_1abb459bcd55b41471e201475fbf1a1b1f"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">set_log_verbosity</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="w"> </span><span class="n sig-param"><span class="pre">level</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task17set_log_verbosityEN4espp6Logger9VerbosityE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the log verbosity for the logger <div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="ws_s3_touch.html#classespp_1_1BaseComponent_1a3159df4e466f93ebb6cca7e685d27243"><span class="std std-ref">set_log_level</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="logger.html#classespp_1_1Logger_1ac6c63313236b0ae6ff44f3f94a6f99cb"><span class="std std-ref">Logger::Verbosity</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="logger.html#classespp_1_1Logger_1aa8c260085619fd42e17b92c41a638741"><span class="std std-ref">Logger::set_verbosity</span></a></p>
</div>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a convenience method that calls set_log_level </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>level</strong> – The verbosity level to use for the logger </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4NK4espp4Task17get_log_verbosityEv">
<span id="_CPPv3NK4espp4Task17get_log_verbosityEv"></span><span id="_CPPv2NK4espp4Task17get_log_verbosityEv"></span><span id="espp::Task::get_log_verbosityC"></span><span class="target" id="classespp_1_1BaseComponent_1ac9cda1ea5d5321040ca13a827057ff79"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">get_log_verbosity</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><span class="w"> </span><span class="k"><span class="pre">const</span></span><a class="headerlink" href="#_CPPv4NK4espp4Task17get_log_verbosityEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the log verbosity for the logger <div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="ws_s3_touch.html#classespp_1_1BaseComponent_1a54f34a70b117486a7055e4a6f1d4d7a8"><span class="std std-ref">get_log_level</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="logger.html#classespp_1_1Logger_1ac6c63313236b0ae6ff44f3f94a6f99cb"><span class="std std-ref">Logger::Verbosity</span></a></p>
</div>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="logger.html#classespp_1_1Logger_1a6ed0028b750b3e4aae21d2ecb3670c55"><span class="std std-ref">Logger::get_verbosity</span></a></p>
</div>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a convenience method that calls get_log_level </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The verbosity level of the logger </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task18set_log_rate_limitENSt6chrono8durationIfEE">
<span id="_CPPv3N4espp4Task18set_log_rate_limitENSt6chrono8durationIfEE"></span><span id="_CPPv2N4espp4Task18set_log_rate_limitENSt6chrono8durationIfEE"></span><span id="espp::Task::set_log_rate_limit__std::chrono::duration:float:"></span><span class="target" id="classespp_1_1BaseComponent_1a8b95d7a8a87f22a989f3654a238774a0"></span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">set_log_rate_limit</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">chrono</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">duration</span></span><span class="p"><span class="pre">&lt;</span></span><span class="kt"><span class="pre">float</span></span><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">rate_limit</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task18set_log_rate_limitENSt6chrono8durationIfEE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Set the rate limit for the logger <div class="admonition seealso">
<p class="admonition-title">See also</p>
<p><a class="reference internal" href="logger.html#classespp_1_1Logger_1a9ce0c51e1bf43e63235c6ddf3280b15d"><span class="std std-ref">Logger::set_rate_limit</span></a></p>
</div>
</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only calls to the logger that have _rate_limit suffix will be rate limited </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>rate_limit</strong> – The rate limit to use for the logger </p>
</dd>
</dl>
</dd></dl>

</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-static-functions">Public Static Functions</p>
<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task11make_uniqueERKN4espp4Task6ConfigE">
<span id="_CPPv3N4espp4Task11make_uniqueERKN4espp4Task6ConfigE"></span><span id="_CPPv2N4espp4Task11make_uniqueERKN4espp4Task6ConfigE"></span><span id="espp::Task::make_unique__espp::Task::ConfigCR"></span><span class="target" id="classespp_1_1Task_1ae331d2ccfcfc700001ec0e931f486b83"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">unique_ptr</span></span><span class="p"><span class="pre">&lt;</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">&gt;</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">make_unique</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task6ConfigE" title="espp::Task::Config"><span class="n"><span class="pre">Config</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">config</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task11make_uniqueERKN4espp4Task6ConfigE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get a unique pointer to a new task created with <code class="docutils literal notranslate"><span class="pre">config</span></code>. Useful to not have to use templated std::make_unique (less typing). </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> – <a class="reference internal" href="#structespp_1_1Task_1_1Config"><span class="std std-ref">Config</span></a> struct to initialize the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> with. </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>std::unique_ptr&lt;Task&gt; pointer to the newly created task. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task23configure_task_watchdogE8uint32_tb">
<span id="_CPPv3N4espp4Task23configure_task_watchdogE8uint32_tb"></span><span id="_CPPv2N4espp4Task23configure_task_watchdogE8uint32_tb"></span><span id="espp::Task::configure_task_watchdog__uint32_t.b"></span><span class="target" id="classespp_1_1Task_1a8af451ee873be43648ce532c63bb3395"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">configure_task_watchdog</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">uint32_t</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">timeout_ms</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">panic_on_timeout</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task23configure_task_watchdogE8uint32_tb" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize/Configure the task watchdog for the current task. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is only available on ESP </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will do nothing unless CONFIG_ESP_TASK_WDT_EN is enabled in the menuconfig. Default is y (enabled). </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will not monitor the idle tasks. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the watchdog has not been configured, then this function will call `esp_task_wdt_init`, otherwise it will then call `esp_task_wdt_reconfigure`. </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout_ms</strong> – Timeout in milliseconds for the watchdog. </p></li>
<li><p><strong>panic_on_timeout</strong> – Whether or not to panic on timeout. </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>true if the watchdog was initialized, false otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task23configure_task_watchdogERKNSt6chrono12millisecondsEb">
<span id="_CPPv3N4espp4Task23configure_task_watchdogERKNSt6chrono12millisecondsEb"></span><span id="_CPPv2N4espp4Task23configure_task_watchdogERKNSt6chrono12millisecondsEb"></span><span id="espp::Task::configure_task_watchdog__std::chrono::millisecondsCR.b"></span><span class="target" id="classespp_1_1Task_1a8d0a27e00041621b6058b4cd9159cfd6"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">configure_task_watchdog</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">chrono</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">milliseconds</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">timeout</span></span>, <span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="n sig-param"><span class="pre">panic_on_timeout</span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="k"><span class="pre">true</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task23configure_task_watchdogERKNSt6chrono12millisecondsEb" title="Permalink to this definition"></a><br /></dt>
<dd><p>Initialize/Configure the task watchdog for the current task. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is only available on ESP </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will do nothing unless CONFIG_ESP_TASK_WDT_EN is enabled in the menuconfig. Default is y (enabled). </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will not monitor the idle tasks. </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the watchdog has not been configured, then this function will call `esp_task_wdt_init`, otherwise it will then call `esp_task_wdt_reconfigure`. </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>timeout</strong> – The timeout for the watchdog. </p></li>
<li><p><strong>panic_on_timeout</strong> – Whether or not to panic on timeout. </p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>true if the watchdog was initialized, false otherwise. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task17get_watchdog_infoERNSt10error_codeE">
<span id="_CPPv3N4espp4Task17get_watchdog_infoERNSt10error_codeE"></span><span id="_CPPv2N4espp4Task17get_watchdog_infoERNSt10error_codeE"></span><span id="espp::Task::get_watchdog_info__std::error_codeR"></span><span class="target" id="classespp_1_1Task_1aec353d4034b52f01515bc32991d8a0ee"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">get_watchdog_info</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">error_code</span></span><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">ec</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task17get_watchdog_infoERNSt10error_codeE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Retrieve the info about tasks / users which triggered the task watchdog timeout. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is only available on ESP </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will do nothing unless CONFIG_ESP_TASK_WDT_EN is enabled in the menuconfig. Default is y (enabled). </p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function will only return info for tasks which are still registered with the watchdog. If you call this after you have called <a class="reference internal" href="#classespp_1_1Task_1ae79526491235c6fc2484133f072f9e91"><span class="std std-ref">stop_watchdog()</span></a> for a task, then even if the task triggered the watchdog timeout you will not get that information. </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ec</strong> – Error code to set if there was an error retrieving the info. </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>std::string containing the task watchdog info, or an empty string if there was no timeout or there was an error retrieving the info. </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task8get_infoEv">
<span id="_CPPv3N4espp4Task8get_infoEv"></span><span id="_CPPv2N4espp4Task8get_infoEv"></span><span id="espp::Task::get_info"></span><span class="target" id="classespp_1_1Task_1acba2857dde4b395a3ff1210e4623c7e0"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">get_info</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task8get_infoEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the info (as a string) for the task of the current context. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is only available on ESP </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>std::string containing name, core ID, priority, and stack high water mark (B) </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task8get_infoERK4Task">
<span id="_CPPv3N4espp4Task8get_infoERK4Task"></span><span id="_CPPv2N4espp4Task8get_infoERK4Task"></span><span id="espp::Task::get_info__TaskCR"></span><span class="target" id="classespp_1_1Task_1a72961b729ba62f75c357b60eec6e0d70"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">get_info</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="w"> </span><span class="p"><span class="pre">&amp;</span></span><span class="n sig-param"><span class="pre">task</span></span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task8get_infoERK4Task" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the info (as a string) for the provided <code class="docutils literal notranslate"><span class="pre">task</span></code>. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This function is only available on ESP </p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>task</strong> – Reference to the task for which you want the information. </p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>std::string containing name, core ID, priority, and stack high water mark (B) </p>
</dd>
</dl>
</dd></dl>

<dl class="cpp function">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task14get_current_idEv">
<span id="_CPPv3N4espp4Task14get_current_idEv"></span><span id="_CPPv2N4espp4Task14get_current_idEv"></span><span id="espp::Task::get_current_id"></span><span class="target" id="classespp_1_1Task_1aedb75fe228a3ad86e62e15e11c4f29ae"></span><span class="k"><span class="pre">static</span></span><span class="w"> </span><span class="k"><span class="pre">inline</span></span><span class="w"> </span><span class="n"><span class="pre">task_id_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">get_current_id</span></span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#_CPPv4N4espp4Task14get_current_idEv" title="Permalink to this definition"></a><br /></dt>
<dd><p>Get the ID for the current thread / task context. </p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>ID for the current thread / task context. </p>
</dd>
</dl>
</dd></dl>

</div>
<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task10BaseConfigE">
<span id="_CPPv3N4espp4Task10BaseConfigE"></span><span id="_CPPv2N4espp4Task10BaseConfigE"></span><span id="espp::Task::BaseConfig"></span><span class="target" id="structespp_1_1Task_1_1BaseConfig"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">BaseConfig</span></span></span><a class="headerlink" href="#_CPPv4N4espp4Task10BaseConfigE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Base configuration struct for the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a>. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is designed to be used as a configuration struct in other classes that may have a <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a> as a member. </p>
</div>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task10BaseConfig4nameE">
<span id="_CPPv3N4espp4Task10BaseConfig4nameE"></span><span id="_CPPv2N4espp4Task10BaseConfig4nameE"></span><span id="espp::Task::BaseConfig::name__ss"></span><span class="target" id="structespp_1_1Task_1_1BaseConfig_1aabd7023b6000a908c2f571f044235e34"></span><span class="n"><span class="pre">std</span></span><span class="p"><span class="pre">::</span></span><span class="n"><span class="pre">string</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">name</span></span></span><a class="headerlink" href="#_CPPv4N4espp4Task10BaseConfig4nameE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Name of the task </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task10BaseConfig16stack_size_bytesE">
<span id="_CPPv3N4espp4Task10BaseConfig16stack_size_bytesE"></span><span id="_CPPv2N4espp4Task10BaseConfig16stack_size_bytesE"></span><span id="espp::Task::BaseConfig::stack_size_bytes__s"></span><span class="target" id="structespp_1_1Task_1_1BaseConfig_1ab9db006c0f01820473bb571c4df785c6"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stack_size_bytes</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="p"><span class="pre">{</span></span><span class="m"><span class="pre">4096</span></span><span class="p"><span class="pre">}</span></span><a class="headerlink" href="#_CPPv4N4espp4Task10BaseConfig16stack_size_bytesE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Stack Size (B) allocated to the task. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task10BaseConfig8priorityE">
<span id="_CPPv3N4espp4Task10BaseConfig8priorityE"></span><span id="_CPPv2N4espp4Task10BaseConfig8priorityE"></span><span id="espp::Task::BaseConfig::priority__s"></span><span class="target" id="structespp_1_1Task_1_1BaseConfig_1a10c00594ead2477810694964660d13f1"></span><span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">priority</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="p"><span class="pre">{</span></span><span class="m"><span class="pre">0</span></span><span class="p"><span class="pre">}</span></span><a class="headerlink" href="#_CPPv4N4espp4Task10BaseConfig8priorityE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Priority of the task, 0 is lowest priority on ESP / FreeRTOS. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task10BaseConfig7core_idE">
<span id="_CPPv3N4espp4Task10BaseConfig7core_idE"></span><span id="_CPPv2N4espp4Task10BaseConfig7core_idE"></span><span id="espp::Task::BaseConfig::core_id__i"></span><span class="target" id="structespp_1_1Task_1_1BaseConfig_1a045c74ccd70bc354828c58d92e3279c7"></span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">core_id</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="p"><span class="pre">{</span></span><span class="o"><span class="pre">-</span></span><span class="m"><span class="pre">1</span></span><span class="p"><span class="pre">}</span></span><a class="headerlink" href="#_CPPv4N4espp4Task10BaseConfig7core_idE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Core ID of the task, -1 means it is not pinned to any core. </p>
</dd></dl>

</div>
</dd></dl>

<dl class="cpp struct">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task6ConfigE">
<span id="_CPPv3N4espp4Task6ConfigE"></span><span id="_CPPv2N4espp4Task6ConfigE"></span><span id="espp::Task::Config"></span><span class="target" id="structespp_1_1Task_1_1Config"></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">Config</span></span></span><a class="headerlink" href="#_CPPv4N4espp4Task6ConfigE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Configuration struct for the <a class="reference internal" href="#classespp_1_1Task"><span class="std std-ref">Task</span></a>. Can be initialized with any of the supported callback function signatures. </p>
<div class="breathe-sectiondef docutils container">
<p class="breathe-sectiondef-title rubric" id="breathe-section-title-public-members">Public Members</p>
<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task6Config8callbackE">
<span id="_CPPv3N4espp4Task6Config8callbackE"></span><span id="_CPPv2N4espp4Task6Config8callbackE"></span><span id="espp::Task::Config::callback__espp::Task::callback_variant"></span><span class="target" id="structespp_1_1Task_1_1Config_1af08feca48d561eabbdb39565ef56822f"></span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task16callback_variantE" title="espp::Task::callback_variant"><span class="n"><span class="pre">callback_variant</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">callback</span></span></span><a class="headerlink" href="#_CPPv4N4espp4Task6Config8callbackE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Callback function </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task6Config11task_configE">
<span id="_CPPv3N4espp4Task6Config11task_configE"></span><span id="_CPPv2N4espp4Task6Config11task_configE"></span><span id="espp::Task::Config::task_config__espp::Task::BaseConfig"></span><span class="target" id="structespp_1_1Task_1_1Config_1a83ea80e3e91e64ff57d90ea637fcfb8a"></span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4TaskE" title="espp::Task"><span class="n"><span class="pre">Task</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="#_CPPv4N4espp4Task10BaseConfigE" title="espp::Task::BaseConfig"><span class="n"><span class="pre">BaseConfig</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">task_config</span></span></span><a class="headerlink" href="#_CPPv4N4espp4Task6Config11task_configE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Base configuration for the task. </p>
</dd></dl>

<dl class="cpp var">
<dt class="sig sig-object cpp" id="_CPPv4N4espp4Task6Config9log_levelE">
<span id="_CPPv3N4espp4Task6Config9log_levelE"></span><span id="_CPPv2N4espp4Task6Config9log_levelE"></span><span id="espp::Task::Config::log_level__espp::Logger::Verbosity"></span><span class="target" id="structespp_1_1Task_1_1Config_1a8bbc5cf935f330b37b2b96609734cfc8"></span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">log_level</span></span></span><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="p"><span class="pre">{</span></span><span class="n"><span class="pre">espp</span></span><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6LoggerE" title="espp::Logger"><span class="n"><span class="pre">Logger</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9VerbosityE" title="espp::Logger::Verbosity"><span class="n"><span class="pre">Verbosity</span></span></a><span class="p"><span class="pre">::</span></span><a class="reference internal" href="logger.html#_CPPv4N4espp6Logger9Verbosity4WARNE" title="espp::Logger::Verbosity::WARN"><span class="n"><span class="pre">WARN</span></span></a><span class="p"><span class="pre">}</span></span><a class="headerlink" href="#_CPPv4N4espp4Task6Config9log_levelE" title="Permalink to this definition"></a><br /></dt>
<dd><p>Log verbosity for the task. </p>
</dd></dl>

</div>
</dd></dl>

</dd></dl>

</section>
<section id="id1">
<h3>Header File<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/esp-cpp/espp/blob/46e6bf33/components/task/include/run_on_core.hpp">components/task/include/run_on_core.hpp</a></p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="tabulate_example.html" class="btn btn-neutral float-left" title="Tabulate Example" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="task_example.html" class="btn btn-neutral float-right" title="Task Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022 - 2025, William Emfinger.</p>
  </div>

  <ul class="footer">
        <li>
	    
            
            Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/espressif/sphinx_idf_theme">theme</a>  based on <a href="https://github.com/readthedocs/sphinx_rtd_theme">Read the Docs Sphinx Theme</a>.
         </li>

  </ul> 

</footer>
        </div>
      </div>
    </section>
  </div>

  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>